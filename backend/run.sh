#!/bin/bash

# ุงุณฺฉุฑูพุช ุฑุงูโุงูุฏุงุฒ Backend

echo "๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ Backend..."

# ุจุฑุฑุณ ูุฌูุฏ ูุญุท ูุฌุงุฒ
if [ ! -d "venv" ]; then
    echo "๐ฆ ุงุฌุงุฏ ูุญุท ูุฌุงุฒ..."
    python -m venv venv
fi

# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ
echo "โ ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ..."
source venv/bin/activate

# ูุตุจ ูุงุจุณุชฺฏโูุง
echo "๐ฅ ูุตุจ ูุงุจุณุชฺฏโูุง..."
pip install -r requirements.txt

# ุจุฑุฑุณ ูุงู .env
if [ ! -f ".env" ]; then
    echo "โ๏ธ  ูุงู .env ุงูุช ูุดุฏ. ฺฉูพ ุงุฒ .env.example..."
    cp .env.example .env
    echo "โ๏ธ  ูุทูุงู ูุงู .env ุฑุง ุจุง API Keys ูุงูุน ูุฑุงุด ฺฉูุฏ"
fi

# ุงุฌุฑุง ุณุฑูุฑ
echo "๐ฏ ุงุฌุฑุง ุณุฑูุฑ FastAPI..."
python main.py
