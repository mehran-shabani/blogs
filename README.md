# ?? ????? ???????? ????? ?? ??? ??????

????? ???????? ?????????? ????? ?? ??? ?????? ?? ?? ??????? ?? **FastAPI** ?? ?????? ? **Next.js 15** ?? ????????? ????? ??? ???. ??? ????? ?????? ???????? ?????? (Semantic Search)? ????????? ?????? ?? RAG? ? ????? ????? ????? ?? Firecrawl ?? ????.

## ? ????????? ????

- ?? **???????? ?????? ??????** ?? ??????? ?? Embeddings
- ?? **????????? ?? RAG** (Retrieval-Augmented Generation)
- ?? **????? ?? ?????** ?? Firecrawl API
- ?? **???? ?????? ????? ????** ?? ???????? ???? RTL
- ?? **?? ???? ? ????** ???? ?????
- ?? **??? ??????** ???? ??????? OpenAI ? ?????? ?????
- ?? **Vector Store ?? Qdrant** ???? ???????? ????
- ?? **?????? ????? API Key ? Base URL** ??????

## ??? ?????? ?????

```
project_root/
??? backend/                    # Backend FastAPI
?   ??? main.py                # ???? ???? ????
?   ??? api/
?   ?   ??? search.py          # API Endpoints
?   ?   ??? config.py          # ??????? ? Settings
?   ??? core/
?   ?   ??? openai_client.py   # ?????? OpenAI
?   ?   ??? firecrawl_client.py # ?????? Firecrawl
?   ?   ??? rag_engine.py      # ????? RAG
?   ??? db/
?   ?   ??? models.py          # ??????? ???????
?   ?   ??? vector_store.py    # Vector Store ?? Qdrant
?   ??? requirements.txt       # ??????????? Python
?   ??? .env.example           # ????? ??????? ?????
?
??? frontend/                   # Frontend Next.js
?   ??? app/
?   ?   ??? page.tsx           # ???? ????
?   ?   ??? layout.tsx         # Layout ???
?   ?   ??? globals.css        # ?????????? ??????
?   ?   ??? providers.tsx      # Context Providers
?   ?   ??? admin/
?   ?       ??? page.tsx       # ??? ??????
?   ??? components/
?   ?   ??? SearchBar.tsx      # ???????? ???????
?   ?   ??? ResultCard.tsx     # ???????? ????? ?????
?   ?   ??? ThemeToggle.tsx    # ???? ????? ??
?   ??? package.json           # ??????????? Node.js
?   ??? next.config.js         # ??????? Next.js
?
??? README.md                   # ??? ????
```

## ?? ??????????

### Backend
- Python 3.9 ?? ??????
- pip (Package Manager)

### Frontend
- Node.js 18 ?? ??????
- npm ?? yarn

### ????????? ????? (???????)
- **OpenAI API Key** ?? API ?????? (??? GapGPT)
- **Firecrawl API Key** ???? ????? ?? (???????)

## ?? ??? ? ??????????

### 1?? ???? ???? ?????

```bash
git clone <repository-url>
cd persian-search-engine
```

### 2?? ?????????? Backend

```bash
# ???? ?? ???? backend
cd backend

# ????? ???? ????? Python
python -m venv venv

# ????????? ???? ?????
# ?? ??????/Mac:
source venv/bin/activate
# ?? Windows:
venv\Scripts\activate

# ??? ??????????
pip install -r requirements.txt

# ??? ???? ???? ???????
cp .env.example .env

# ?????? ???? .env ? ???? ???? API Keys
# OPENAI_API_KEY=your-api-key
# OPENAI_BASE_URL=https://api.gapgpt.app/v1
# FIRECRAWL_API_KEY=your-firecrawl-key (???????)

# ????? ????
python main.py
```

???? Backend ?? ???? `http://localhost:8000` ???? ??????.
??????? API ?? `http://localhost:8000/docs` ?? ????? ???.

### 3?? ?????????? Frontend

?? ?? ??????? ????:

```bash
# ???? ?? ???? frontend
cd frontend

# ??? ??????????
npm install

# ??? ???? ???? ???????
cp .env.local.example .env.local

# ?????? ???? .env.local ?? ???? ????
# NEXT_PUBLIC_API_URL=http://localhost:8000

# ????? ???? ?????
npm run dev
```

Frontend ?? ???? `http://localhost:3000` ???? ??????.

## ?? ???? ???????

### 1. ????? API Key (????? ???)

1. ?? ???? `http://localhost:3000/admin` ?????
2. API Key ? Base URL ??? ?? ???? ????
3. ??? "????? ???????" ???? ????

### 2. ?????? ?????

?? ??? ???? ?????? ????? ???? ????:

#### ??? ???: ?? ???? ??? ??????
1. ?? ???? Admin ?????
2. ?? ??? "?????? ????? ?? ??"? URL ???? ??? ?? ???? ????
3. ??? "?????? URL" ???? ????

#### ??? ???: ??????? ?? API
```bash
curl -X POST "http://localhost:8000/api/ingest-url" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://example.com/article"}'
```

### 3. ???????

1. ?? ???? ???? (`http://localhost:3000`) ?????
2. ???? ??? ?? ?? ????? ??????
3. ?? ???? ?????? ????? "??????? ?? ??" ?? ???? ????
4. ???? ?????? ?? ????? ????? ????? ???? ??????

## ?? API Endpoints

### ???????
```http
POST /api/search
Content-Type: application/json

{
  "query": "??????? ??? ?????? ?????",
  "use_web_search": false,
  "top_k": 5
}
```

### ?????? URL
```http
POST /api/ingest-url
Content-Type: application/json

{
  "url": "https://example.com/article"
}
```

### ?????? ???????
```http
GET /api/config
```

### ??????????? ???????
```http
POST /api/config
Content-Type: application/json

{
  "api_key": "sk-xxxxxxx",
  "base_url": "https://api.gapgpt.app/v1"
}
```

### ????? ?????
```http
GET /api/health
```

## ??? ??????? ???????

### ????? ??? Embedding

?? ???? `backend/api/config.py`:

```python
embedding_model: str = "sentence-transformers/paraphrase-multilingual-mpnet-base-v2"
```

????????? ??????? ???? ?????:
- `sentence-transformers/LaBSE`
- `HooshvareLab/bert-fa-base-uncased`

### ??????? ?? Qdrant ?????

?? ???? `backend/.env`:

```env
QDRANT_URL=http://your-qdrant-server:6333
QDRANT_API_KEY=your-api-key
```

?? ???? `backend/db/vector_store.py`:

```python
# ????? ??? ??
self.client = QdrantClient(":memory:")

# ?? ???
self.client = QdrantClient(
    url=settings.qdrant_url,
    api_key=settings.qdrant_api_key
)
```

### ????? ??? OpenAI

?? ???? `backend/api/config.py`:

```python
openai_model: str = "gpt-4o-mini"  # ?? gpt-4? gpt-3.5-turbo
```

## ?? ?????? ????? ????

```
????? ? Frontend (Next.js)
           ?
    POST /api/search
           ?
    Backend (FastAPI)
           ?
    ???????????????
    ?             ?
Vector Store   Firecrawl
(Semantic)     (Web Search)
    ?             ?
    ???????????????
           ?
    RAG Engine
           ?
    OpenAI API
           ?
    ???? ?????? + ?????
           ?
       Frontend
```

## ?? ???????

???????? ????? ?? ??????:
- `frontend/app/globals.css` - ?????????? ??????
- `frontend/tailwind.config.js` - ??????? Tailwind
- `frontend/app/providers.tsx` - ?????? ??

???? ??????????? ??????? ???? `tailwind.config.js` ?? ?????? ????.

## ?? ??? ?????? ????

### Backend ???? ???????
```bash
# ????? ??? ??????????
pip install -r requirements.txt

# ????? Python version
python --version  # ???? 3.9+ ????
```

### Frontend ???? ???????
```bash
# ??? ???? node_modules ? ??? ????
rm -rf node_modules package-lock.json
npm install
```

### ???? CORS
????? ???? ?? Backend ?? ???? ???? ?? ??? ?????? ? Frontend ?? ????? ?? ?? ???? ???.

### ???? OpenAI API
- API Key ?? ????? ????
- Base URL ?? ????? ????
- ????? ??????? ?? ????? ????

## ?? ?????

?? **???????? ??????:**

1. **????** ???? `.env` ?? commit ?????
2. API Key?? ?? ?? ???? Production ?? ???? ???????? ????? ????? ????
3. ???? ???? Production? ????? ???? ?? ??? Admin ????? ????
4. ?? HTTPS ???? ?????? Frontend ? Backend ??????? ????

## ?? ???????? ?????

- [ ] ????? ???? ???????
- [ ] ??????? ?????????
- [ ] ???????? ?? ??? ????
- [ ] ????? ??????
- [ ] ???? ???? (TTS)
- [ ] ????? ?????? ???? PDF
- [ ] ??????? ?????
- [ ] API Rate Limiting

## ?? ??????

???? ?????? ?? ??? ?????:

1. Fork ????
2. ?? Branch ???? ?????? (`git checkout -b feature/amazing-feature`)
3. ??????? ??? ?? Commit ???? (`git commit -m 'Add amazing feature'`)
4. ?? Branch ??? Push ???? (`git push origin feature/amazing-feature`)
5. ?? Pull Request ??? ????

## ?? ??????

??? ????? ??? ?????? MIT ????? ??? ???.

## ?? ????????

????????? ?? ?? ???? ??? ????? ?????

## ?? ????????

???? ????? ??? ?? ??????? ????? ????? ????? ?? Issue ?? GitHub ??? ????.

---

**????:** 1.0.0 (MVP)  
**?????:** 2025  
**?????:** ? ????? ???????
